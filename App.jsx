import React from "react";
import './style.css';
import anime from "./animejs/anime.es.js"
import { useState, useRef, useEffect } from "react";
import List from "./List";
import MOCK_DATA from './MOCK_DATA.json';
import {BrowserRouter} from "react-router-dom";

const filterC = (searchText, listOf) => {
  if (!searchText) {
    return listOf;
  }
  return listOf.filter(({ firstname }) =>
      firstname.toLowerCase().includes(searchText.toLowerCase())
  );
}
const data = MOCK_DATA;

function App() {

  const [searchTerm, setSearchTerm] = useState('');
  const [caList, setCaList] = useState(data);
  const ll = data.length;
  const element1 = document.querySelector('.inputsearch');

  useEffect(() => {

    const Debounce = setTimeout(() => {
      const filtered = filterC(searchTerm, data);
      if(element1.classList.contains('inputsearchf') && filtered.length === 0){
        element1.classList.toggle("inputsearchf");
        console.log("sec1")
      }
      else if(element1.classList.contains('inputsearchf') && filtered.length !== ll){
        console.log("sec2")
      }
      else if(filtered.length !== 0){
        element1.classList.toggle("inputsearchf");
        console.log("sec3")
      }

      console.log(filtered.length);
      setCaList(filtered);
    }, 0);
    return () => clearTimeout(Debounce);

  }, [searchTerm]);

  return (
      <div>
      <div className="top">

        <div className="physicon">
          <svg className="qqw" viewBox="-5 -5 170.54 30.95">
            <path className="cls-1"
                  d="M255.27,287.15h-2.71a.6.6,0,0,0-.61.6v4.46a2.36,2.36,0,0,1-.51,1.65,1.81,1.81,0,0,1-2.61,0,2.34,2.34,0,0,1-.5-1.63v-13.8a2.24,2.24,0,0,1,.55-1.71,2.5,2.5,0,0,1,1.74-.51h4.65a12.26,12.26,0,0,1,3.18.32,4.77,4.77,0,0,1,1.9,1,4.63,4.63,0,0,1,1.21,1.73,6.09,6.09,0,0,1,.42,2.31,5.13,5.13,0,0,1-1.69,4.15A7.65,7.65,0,0,1,255.27,287.15Zm-.88-8.21h-1.83a.6.6,0,0,0-.61.6v4.27a.6.6,0,0,0,.61.6h1.83a7.31,7.31,0,0,0,2.15-.27,2.49,2.49,0,0,0,1.31-.88,2.62,2.62,0,0,0,.45-1.6,2.71,2.71,0,0,0-.69-1.92C257.08,279.21,256,278.94,254.39,278.94Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M268,277.94v4.95a6.87,6.87,0,0,1,1.24-1.16,4.5,4.5,0,0,1,1.34-.65,5.62,5.62,0,0,1,1.57-.21,4.57,4.57,0,0,1,2.25.54,4.11,4.11,0,0,1,2,2.9,10.6,10.6,0,0,1,.13,1.7v6.38a2.24,2.24,0,0,1-.46,1.52,1.56,1.56,0,0,1-1.22.51c-1.1,0-1.65-.67-1.65-2v-5.62a5.12,5.12,0,0,0-.47-2.46,1.87,1.87,0,0,0-1.81-.86,2.74,2.74,0,0,0-1.6.5,3,3,0,0,0-1.07,1.39A8.84,8.84,0,0,0,268,288v4.4a2.23,2.23,0,0,1-.45,1.51,1.52,1.52,0,0,1-1.23.52c-1.1,0-1.65-.67-1.65-2V277.94a2.3,2.3,0,0,1,.43-1.52,1.5,1.5,0,0,1,1.22-.5,1.54,1.54,0,0,1,1.23.51A2.21,2.21,0,0,1,268,277.94Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M283,294.84l.3-.75-4.1-10.33a3.89,3.89,0,0,1-.38-1.29,1.57,1.57,0,0,1,.22-.79,1.65,1.65,0,0,1,.61-.59,1.53,1.53,0,0,1,.8-.22,1.28,1.28,0,0,1,1.08.46,4.09,4.09,0,0,1,.65,1.31l2.26,6.56a.6.6,0,0,0,1.13,0l2.1-6a13.49,13.49,0,0,1,.58-1.45,1.77,1.77,0,0,1,.54-.71,1.52,1.52,0,0,1,.81-.18,1.49,1.49,0,0,1,.73.2,1.5,1.5,0,0,1,.72,1.27q0,.23-.15.66c-.08.28-.17.57-.27.86l-4.35,11.38a12.82,12.82,0,0,1-1.1,2.35,3.68,3.68,0,0,1-1.42,1.32,5.33,5.33,0,0,1-2.39.45,5.81,5.81,0,0,1-2.19-.31,1.16,1.16,0,0,1-.74-1.16,1.14,1.14,0,0,1,.35-.89,1.54,1.54,0,0,1,1-.31,2.33,2.33,0,0,1,.53.07,2.43,2.43,0,0,0,.55.08,2,2,0,0,0,.9-.17,1.54,1.54,0,0,0,.59-.6A8.73,8.73,0,0,0,283,294.84Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M303.82,290.06a3.84,3.84,0,0,1-2.65,3.85,8.87,8.87,0,0,1-3.2.51,7.69,7.69,0,0,1-3.07-.55A4.34,4.34,0,0,1,293,292.5a2.75,2.75,0,0,1-.61-1.66,1.31,1.31,0,0,1,.39-.94,1.33,1.33,0,0,1,1-.39,1.18,1.18,0,0,1,.81.26,2.7,2.7,0,0,1,.54.72,3.68,3.68,0,0,0,1.22,1.33,3.75,3.75,0,0,0,2,.44,2.77,2.77,0,0,0,1.64-.45,1.23,1.23,0,0,0,.64-1,1.4,1.4,0,0,0-.66-1.29,8.82,8.82,0,0,0-2.19-.77,18,18,0,0,1-2.8-.89,4.72,4.72,0,0,1-1.73-1.24,2.84,2.84,0,0,1-.65-1.89,3.36,3.36,0,0,1,.6-1.9,4.21,4.21,0,0,1,1.76-1.42,6.86,6.86,0,0,1,2.82-.53,9.12,9.12,0,0,1,2.32.27,5.82,5.82,0,0,1,1.72.72,3.49,3.49,0,0,1,1.05,1,2,2,0,0,1,.36,1.08,1.24,1.24,0,0,1-.38.94,1.54,1.54,0,0,1-1.09.36,1.39,1.39,0,0,1-.88-.29,6.09,6.09,0,0,1-.82-.88,2.87,2.87,0,0,0-.89-.78,2.76,2.76,0,0,0-1.39-.29,2.67,2.67,0,0,0-1.5.38,1.13,1.13,0,0,0-.6,1,1,1,0,0,0,.44.86,3.6,3.6,0,0,0,1.18.55c.5.15,1.18.33,2.05.54a10.9,10.9,0,0,1,2.54.9,4.22,4.22,0,0,1,1.48,1.24A2.74,2.74,0,0,1,303.82,290.06Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M308.33,279.32a1.71,1.71,0,0,1-1.19-.43,1.64,1.64,0,0,1,0-2.37,1.69,1.69,0,0,1,1.18-.46,1.71,1.71,0,0,1,1.14.42,1.45,1.45,0,0,1,.5,1.21,1.54,1.54,0,0,1-.48,1.2A1.7,1.7,0,0,1,308.33,279.32Zm1.64,3.44v9.63a2.2,2.2,0,0,1-.47,1.52,1.59,1.59,0,0,1-1.21.51,1.49,1.49,0,0,1-1.19-.52,2.2,2.2,0,0,1-.46-1.51v-9.53a2.13,2.13,0,0,1,.46-1.49,1.54,1.54,0,0,1,1.19-.5,1.61,1.61,0,0,1,1.21.5A2,2,0,0,1,310,282.76Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M325.37,290.29a2.91,2.91,0,0,1-.38,1.34,4.32,4.32,0,0,1-1.13,1.34,5.85,5.85,0,0,1-1.92,1,8.24,8.24,0,0,1-2.62.39,6.4,6.4,0,0,1-4.82-1.8,6.69,6.69,0,0,1-1.73-4.83,8,8,0,0,1,.79-3.63,5.68,5.68,0,0,1,2.3-2.43,7,7,0,0,1,3.59-.86,6.93,6.93,0,0,1,2.37.38,6.1,6.1,0,0,1,1.83,1,4.68,4.68,0,0,1,1.15,1.28,2.57,2.57,0,0,1,.4,1.26,1.31,1.31,0,0,1-.45,1,1.53,1.53,0,0,1-1.08.42A1.09,1.09,0,0,1,323,286a4.06,4.06,0,0,1-.62-.69,5,5,0,0,0-1.27-1.4,2.51,2.51,0,0,0-.78-.35,3.52,3.52,0,0,0-3.5,1.33,5.35,5.35,0,0,0-.7,2.87,5.93,5.93,0,0,0,.24,1.73,3.75,3.75,0,0,0,.67,1.34,2.79,2.79,0,0,0,1.06.84,3.23,3.23,0,0,0,1.37.29,3.06,3.06,0,0,0,1.71-.47,3.89,3.89,0,0,0,1.26-1.41,3.42,3.42,0,0,1,.66-.88,1.28,1.28,0,0,1,.87-.32,1.27,1.27,0,0,1,1,.47A1.49,1.49,0,0,1,325.37,290.29Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M339,290.06a3.84,3.84,0,0,1-2.65,3.85,8.87,8.87,0,0,1-3.2.51,7.69,7.69,0,0,1-3.07-.55,4.34,4.34,0,0,1-1.89-1.37,2.75,2.75,0,0,1-.61-1.66,1.31,1.31,0,0,1,.39-.94,1.33,1.33,0,0,1,1-.39,1.18,1.18,0,0,1,.81.26,2.7,2.7,0,0,1,.54.72,3.62,3.62,0,0,0,1.23,1.33,3.69,3.69,0,0,0,1.94.44,2.77,2.77,0,0,0,1.64-.45,1.23,1.23,0,0,0,.64-1,1.4,1.4,0,0,0-.66-1.29,8.67,8.67,0,0,0-2.19-.77,18,18,0,0,1-2.8-.89,4.72,4.72,0,0,1-1.73-1.24,2.84,2.84,0,0,1-.65-1.89,3.36,3.36,0,0,1,.6-1.9,4.21,4.21,0,0,1,1.76-1.42,6.86,6.86,0,0,1,2.82-.53,9.12,9.12,0,0,1,2.32.27,5.89,5.89,0,0,1,1.73.72,3.74,3.74,0,0,1,1.05,1,2.07,2.07,0,0,1,.36,1.08,1.24,1.24,0,0,1-.39.94,1.54,1.54,0,0,1-1.09.36A1.41,1.41,0,0,1,336,285a6.71,6.71,0,0,1-.82-.88,2.87,2.87,0,0,0-.89-.78,2.76,2.76,0,0,0-1.39-.29,2.67,2.67,0,0,0-1.5.38,1.13,1.13,0,0,0-.6,1,1.05,1.05,0,0,0,.44.86,3.6,3.6,0,0,0,1.18.55c.5.15,1.18.33,2.05.54a10.9,10.9,0,0,1,2.54.9,4.35,4.35,0,0,1,1.49,1.24A2.81,2.81,0,0,1,339,290.06Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M345.61,278.11v12.43a.6.6,0,0,0,.6.6H353a2,2,0,0,1,1.35.42,1.39,1.39,0,0,1,.47,1.08,1.36,1.36,0,0,1-.46,1.07,2,2,0,0,1-1.36.41H344.2a1.91,1.91,0,0,1-2.22-2.23V278.11a2.46,2.46,0,0,1,.49-1.65,1.7,1.7,0,0,1,1.31-.54,1.73,1.73,0,0,1,1.32.54A2.33,2.33,0,0,1,345.61,278.11Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M366.22,288.46h-5.86a.61.61,0,0,0-.6.71,4.28,4.28,0,0,0,.4,1.3,3.09,3.09,0,0,0,2.82,1.74,4.17,4.17,0,0,0,1.09-.14,3.45,3.45,0,0,0,1-.44,7,7,0,0,0,.85-.64c.26-.23.6-.54,1-.93a1.16,1.16,0,0,1,.74-.22,1.24,1.24,0,0,1,.83.28,1,1,0,0,1,.32.8,2.12,2.12,0,0,1-.36,1.05,4.1,4.1,0,0,1-1.07,1.16,5.89,5.89,0,0,1-1.79.92,7.59,7.59,0,0,1-2.49.37,6.64,6.64,0,0,1-5-1.83,6.82,6.82,0,0,1-1.78-5,8.37,8.37,0,0,1,.44-2.74,6.12,6.12,0,0,1,1.28-2.17,5.5,5.5,0,0,1,2.08-1.38,7.45,7.45,0,0,1,2.73-.48,6.47,6.47,0,0,1,3.35.82,5.41,5.41,0,0,1,2.09,2.13,5.54,5.54,0,0,1,.7,2.66,1.66,1.66,0,0,1-.72,1.63A4.49,4.49,0,0,1,366.22,288.46Zm-5.81-1.89h4.65a.61.61,0,0,0,.6-.72,3.57,3.57,0,0,0-.83-1.84,2.79,2.79,0,0,0-2.11-.84,2.63,2.63,0,0,0-2,.86,3.7,3.7,0,0,0-.86,1.8A.61.61,0,0,0,360.41,286.57Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M380.54,293.06a.61.61,0,0,0-.85-.14,10.08,10.08,0,0,1-1.83,1,6.56,6.56,0,0,1-2.53.47,4.76,4.76,0,0,1-2.25-.51,3.63,3.63,0,0,1-1.5-1.37,3.55,3.55,0,0,1-.52-1.88,3.39,3.39,0,0,1,.86-2.33A4.35,4.35,0,0,1,374.3,287l1.58-.33c.84-.17,1.56-.33,2.15-.47s1-.24,1.47-.39a.59.59,0,0,0,.44-.63,3,3,0,0,0-.49-1.44,2.37,2.37,0,0,0-1.95-.61,4,4,0,0,0-1.91.35,3.17,3.17,0,0,0-1.1,1.06c-.3.47-.52.79-.64.94a1.08,1.08,0,0,1-.81.22,1.45,1.45,0,0,1-1-.36,1.18,1.18,0,0,1-.4-.92,2.77,2.77,0,0,1,.62-1.71,4.46,4.46,0,0,1,1.94-1.37,8.9,8.9,0,0,1,3.28-.53,9.23,9.23,0,0,1,3.46.52,3.18,3.18,0,0,1,1.77,1.64,7.11,7.11,0,0,1,.52,3v2c0,.54,0,1.15,0,1.81a6.61,6.61,0,0,0,.31,2,6,6,0,0,1,.31,1.32,1.22,1.22,0,0,1-.48.93,1.62,1.62,0,0,1-1.09.42,1.49,1.49,0,0,1-1-.48A5.87,5.87,0,0,1,380.54,293.06Zm-.56-5.34a16.81,16.81,0,0,1-2.13.57c-.93.2-1.58.34-1.93.44a2.53,2.53,0,0,0-1,.55,1.39,1.39,0,0,0-.49,1.14,1.66,1.66,0,0,0,.58,1.28,2.09,2.09,0,0,0,1.5.54,3.85,3.85,0,0,0,1.82-.44,2.91,2.91,0,0,0,1.23-1.11,5.15,5.15,0,0,0,.45-2.49Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M389.94,289.61v2.78a2.16,2.16,0,0,1-.47,1.52,1.59,1.59,0,0,1-1.21.51,1.54,1.54,0,0,1-1.19-.51,2.19,2.19,0,0,1-.46-1.52v-9.27q0-2.25,1.62-2.25a1.35,1.35,0,0,1,1.2.53,2.88,2.88,0,0,1,.4,1.55,5.74,5.74,0,0,1,1.23-1.55,2.54,2.54,0,0,1,1.68-.53,4.31,4.31,0,0,1,2,.53,1.55,1.55,0,0,1,1,1.39,1.31,1.31,0,0,1-.42,1,1.28,1.28,0,0,1-.91.4,4.1,4.1,0,0,1-.88-.22,3.86,3.86,0,0,0-1.24-.23,1.85,1.85,0,0,0-1.2.38,2.48,2.48,0,0,0-.72,1.15,7.66,7.66,0,0,0-.35,1.8C390,287.76,389.94,288.61,389.94,289.61Z"
                  transform="translate(-248.08 -275.67)"/>
            <path className="cls-1"
                  d="M400.61,282.71v.41a6,6,0,0,1,1.92-1.71,5.17,5.17,0,0,1,2.4-.54,4.82,4.82,0,0,1,2.36.57,3.7,3.7,0,0,1,1.55,1.63,4,4,0,0,1,.43,1.32,14.69,14.69,0,0,1,.09,1.8v6.2a2.24,2.24,0,0,1-.45,1.52,1.66,1.66,0,0,1-2.4,0,2.2,2.2,0,0,1-.47-1.51v-5.55a5.47,5.47,0,0,0-.46-2.52,1.85,1.85,0,0,0-1.82-.87,2.64,2.64,0,0,0-1.62.53,3,3,0,0,0-1.08,1.46,10.55,10.55,0,0,0-.24,2.78v4.17a2.16,2.16,0,0,1-.47,1.52,1.58,1.58,0,0,1-1.22.51,1.5,1.5,0,0,1-1.18-.52,2.2,2.2,0,0,1-.46-1.51v-9.63a2.08,2.08,0,0,1,.41-1.42,1.46,1.46,0,0,1,1.14-.47,1.53,1.53,0,0,1,.79.21,1.5,1.5,0,0,1,.57.62A2.25,2.25,0,0,1,400.61,282.71Z"
                  transform="translate(-248.08 -275.67)"/>
          </svg>
        </div>
        <div className="divinputsearch">
          <div className="search">
              <div className="divsearch">
                <svg className="svgsearch" viewBox="-30 -30 280 290">
                  <path className="cles-2" d="M143,499,255,382" transform="translate(-140.83 -250)"/>
                  <path className="cles-1"
                        d="M302,404a77,77,0,1,1,77-77A77.08,77.08,0,0,1,302,404Zm0-148a71,71,0,1,0,71,71A71.08,71.08,0,0,0,302,256Z"
                        transform="translate(-140.83 -250)"/>
                </svg>
              </div>
          </div>
          <input value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} type="text" className="inputsearch" placeholder="Поиск тем"/>

          <List cList={caList} ll={ll} />

        </div>

      </div>
      </div>
);

}

export default App;
